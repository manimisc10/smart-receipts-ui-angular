<div class="dashboard-container">
  <!-- Welcome Section -->
  <div class="welcome-section">
    <h1 class="welcome-title">
      {{ getGreeting() }}, {{ currentUser?.name || 'User' }}! ðŸ‘‹
    </h1>
    <p class="welcome-subtitle">
      Here's what's happening with your receipts today
    </p>
  </div>

  <!-- Quick Actions -->
  <div class="quick-actions">
    <button mat-raised-button color="primary" routerLink="/scan" class="action-button primary-action">
      <mat-icon>camera_alt</mat-icon>
      Scan New Receipt
    </button>
    <button mat-stroked-button color="primary" routerLink="/history" class="action-button secondary-action">
      <mat-icon>history</mat-icon>
      View History
    </button>
    <button mat-stroked-button color="primary" routerLink="/analytics" class="action-button secondary-action">
      <mat-icon>analytics</mat-icon>
      View Analytics
    </button>
  </div>

  <!-- Stats Grid -->
  <div class="stats-grid">
    <mat-card class="stat-card">
      <mat-card-content>
        <div class="stat-content">
          <div class="stat-icon total-receipts">
            <mat-icon>receipt</mat-icon>
          </div>
          <div class="stat-info">
            <div class="stat-value">{{ stats.totalReceipts }}</div>
            <div class="stat-label">Total Receipts</div>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card">
      <mat-card-content>
        <div class="stat-content">
          <div class="stat-icon total-spent">
            <mat-icon>attach_money</mat-icon>
          </div>
          <div class="stat-info">
            <div class="stat-value">{{ formatCurrency(stats.totalSpent) }}</div>
            <div class="stat-label">Total Spent</div>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card">
      <mat-card-content>
        <div class="stat-content">
          <div class="stat-icon this-month">
            <mat-icon>calendar_today</mat-icon>
            <div class="month-display">
              <span class="month-abbr">{{ getCurrentMonthAbbr() }}</span>
            </div>
          </div>
          <div class="stat-info">
            <div class="stat-value">{{ formatCurrency(stats.thisMonth) }}</div>
            <div class="stat-label">This Month</div>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card">
      <mat-card-content>
        <div class="stat-content">
          <div class="stat-icon average">
            <mat-icon>trending_up</mat-icon>
          </div>
          <div class="stat-info">
            <div class="stat-value">{{ formatCurrency(stats.averagePerReceipt) }}</div>
            <div class="stat-label">Average per Receipt</div>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Recent Receipts -->
  <div class="recent-section">
    <div class="section-header">
      <h2>Recent Receipts</h2>
      <button mat-button routerLink="/history" color="primary">
        View All
        <mat-icon>arrow_forward</mat-icon>
      </button>
    </div>

    <div class="recent-receipts" *ngIf="getRecentReceipts().length > 0; else noReceipts">
      <mat-card class="receipt-card" *ngFor="let receipt of getRecentReceipts()" [routerLink]="['/receipt', receipt.id]">
        <mat-card-content>
          <div class="receipt-info">
            <div class="receipt-header">
              <h3 class="merchant-name">{{ receipt.merchantName }}</h3>
              <span class="receipt-date">{{ receipt.transactionDate | date:'MMM dd' }}</span>
            </div>
            <div class="receipt-details">
              <p class="receipt-address" *ngIf="receipt.merchantAddress">{{ receipt.merchantAddress }}</p>
              <div class="receipt-total">
                <span class="total-label">Total:</span>
                <span class="total-amount">{{ formatCurrency(receipt.total) }}</span>
              </div>
            </div>
          </div>
          <div class="receipt-arrow">
            <mat-icon>chevron_right</mat-icon>
          </div>
        </mat-card-content>
      </mat-card>
    </div>

    <ng-template #noReceipts>
      <mat-card class="empty-state">
        <mat-card-content>
          <div class="empty-content">
            <mat-icon class="empty-icon">receipt</mat-icon>
            <h3>No receipts yet</h3>
            <p>Start by scanning your first receipt to see it here</p>
            <button mat-raised-button color="primary" routerLink="/scan">
              <mat-icon>camera_alt</mat-icon>
              Scan First Receipt
            </button>
          </div>
        </mat-card-content>
      </mat-card>
    </ng-template>
  </div>
</div>
