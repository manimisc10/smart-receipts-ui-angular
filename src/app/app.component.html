<!-- Navigation for authenticated pages -->
<div *ngIf="isLoggedIn && !isLandingPage">
  <mat-toolbar color="primary" class="app-toolbar">
    <span class="app-title">
      <mat-icon class="title-icon">receipt</mat-icon>
      {{ title }}
    </span>
    
    <!-- Centered desktop top-nav with labels -->
    <div class="toolbar-center" *ngIf="!isMobile">
      <nav class="top-nav top-nav-labeled">
        <a mat-button [routerLink]="['/dashboard']" routerLinkActive="active-top-nav">
          <mat-icon>dashboard</mat-icon>
          <span>Dashboard</span>
        </a>
        <a mat-button [routerLink]="['/scan']" routerLinkActive="active-top-nav">
          <mat-icon>camera_alt</mat-icon>
          <span>Scan Receipt</span>
        </a>
        <a mat-button [routerLink]="['/history']" routerLinkActive="active-top-nav">
          <mat-icon>history</mat-icon>
          <span>Receipt History</span>
        </a>
        <a mat-button [routerLink]="['/analytics']" routerLinkActive="active-top-nav">
          <mat-icon>analytics</mat-icon>
          <span>Analytics</span>
        </a>
        <a mat-button [routerLink]="['/profile']" routerLinkActive="active-top-nav">
          <mat-icon>person</mat-icon>
          <span>Profile</span>
        </a>
      </nav>
    </div>

    <span class="spacer"></span>
    
    <div class="toolbar-actions">
      <button mat-icon-button (click)="logout()" matTooltip="Logout">
        <mat-icon>logout</mat-icon>
      </button>
      <button mat-icon-button (click)="clearData()" matTooltip="Clear Data (Debug)" *ngIf="!isLoggedIn">
        <mat-icon>clear_all</mat-icon>
      </button>
    </div>
  </mat-toolbar>

  <div class="content-wrapper">
    <router-outlet></router-outlet>
  </div>

  <!-- Mobile Bottom Navigation -->
  <div class="mobile-bottom-nav" *ngIf="isMobile">
    <a mat-button 
       [routerLink]="['/dashboard']" 
       routerLinkActive="active-mobile-nav"
       (click)="setCurrentPageTitle('Dashboard')"
       class="mobile-nav-item">
      <mat-icon>dashboard</mat-icon>
    </a>
    
    <a mat-button 
       [routerLink]="['/scan']" 
       routerLinkActive="active-mobile-nav"
       (click)="setCurrentPageTitle('Scan Receipt')"
       class="mobile-nav-item">
      <mat-icon>camera_alt</mat-icon>
    </a>
    
    <a mat-button 
       [routerLink]="['/history']" 
       routerLinkActive="active-mobile-nav"
       (click)="setCurrentPageTitle('Receipt History')"
       class="mobile-nav-item">
      <mat-icon>history</mat-icon>
    </a>
    
    <a mat-button 
       [routerLink]="['/analytics']" 
       routerLinkActive="active-mobile-nav"
       (click)="setCurrentPageTitle('Analytics')"
       class="mobile-nav-item">
      <mat-icon>analytics</mat-icon>
    </a>
    
    <a mat-button 
       [routerLink]="['/profile']" 
       routerLinkActive="active-mobile-nav"
       (click)="setCurrentPageTitle('Profile')"
       class="mobile-nav-item">
      <mat-icon>person</mat-icon>
    </a>
  </div>
</div>

<!-- Navigation for non-authenticated pages (except landing) -->
<div *ngIf="!isLoggedIn && !isLandingPage">
  <mat-toolbar color="primary" class="app-toolbar">
    <span class="app-title">
      <mat-icon class="title-icon">receipt</mat-icon>
      {{ title }}
    </span>
    
    <span class="spacer"></span>
    
    <div class="toolbar-actions">
      <button mat-button [routerLink]="['/login']">Login</button>
      <button mat-raised-button color="accent" [routerLink]="['/register']">Sign Up</button>
    </div>
  </mat-toolbar>

  <div class="content-wrapper">
    <router-outlet></router-outlet>
  </div>
</div>

<!-- Full page content for landing, login, and register pages -->
<div *ngIf="!isLoggedIn && isLandingPage" class="full-page-content">
  <router-outlet></router-outlet>
</div>
